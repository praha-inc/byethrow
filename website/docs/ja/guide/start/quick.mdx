---
description: '@praha/byethrowã‚’ä½¿ã„å§‹ã‚ã‚‹ã®ã¯ç°¡å˜ã§ã™ã€‚Resultå‹ã®åŸºæœ¬ã¨ã€æˆåŠŸãƒ»å¤±æ•—ã‚±ãƒ¼ã‚¹ã®æ‰±ã„æ–¹ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚'
---

import { PackageManagerTabs } from '../../../../theme';

# ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

`@praha/byethrow` ã‚’ä½¿ã„å§‹ã‚ã‚‹ã®ã¯ç°¡å˜ã§ã™ã€‚

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€åŸºæœ¬çš„ãªã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ä½¿ç”¨æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ãŠå¥½ã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

<PackageManagerTabs command="install @praha/byethrow" />

## åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

`@praha/byethrow` ã¯ã€å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹æ“ä½œã®çµæœã‚’è¡¨ã™ `Result` å‹ã‚’æä¾›ã—ã¾ã™ã€‚
ä¾‹å¤–ã‚’æŠ•ã’ã‚‹ä»£ã‚ã‚Šã«ã€é–¢æ•°ã¯ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«ãªã‚‹ `Result` ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚

- **Successï¼ˆæˆåŠŸï¼‰**: å‹ `T` ã®å€¤ã‚’å«ã‚€
- **Failureï¼ˆå¤±æ•—ï¼‰**: å‹ `E` ã®ã‚¨ãƒ©ãƒ¼ã‚’å«ã‚€

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒæ˜ç¤ºçš„ã§äºˆæ¸¬å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## æœ€åˆã® `Result`

ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚

```ts
import { Result } from '@praha/byethrow';

// æˆåŠŸã® Result ã‚’ä½œæˆ
const success = Result.succeed('Hello, World!');

// å¤±æ•—ã® Result ã‚’ä½œæˆ
const failure = Result.fail(new Error('Something went wrong'));

// Result ã‚’ãƒã‚§ãƒƒã‚¯
if (Result.isSuccess(success)) {
  console.log(success.value); // "Hello, World!"
}

if (Result.isFailure(failure)) {
  console.log(failure.error.message); // "Something went wrong"
}
```

## å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹æ“ä½œã‚’æ‰±ã†

`Result.fn` ã‚’ä½¿ã£ã¦ã€ä¾‹å¤–ã‚’æŠ•ã’ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã§ãã¾ã™ã€‚

```ts
import { Result } from '@praha/byethrow';

const parseNumber = Result.fn({
  try: (input: string) => {
    const num = Number(input);
    if (Number.isNaN(num)) {
      throw new Error('Not a valid number');
    }
    return num;
  },
  catch: (error) => new Error('Failed to parse number', { cause: error }),
});

const result = parseNumber('42');
if (Result.isSuccess(result)) {
  console.log(result.value); // 42
}
```

## å€¤ã®å¤‰æ›

`Result.map` ã‚’ä½¿ã£ã¦æˆåŠŸã—ãŸå€¤ã‚’å¤‰æ›ã§ãã¾ã™ã€‚

```ts
import { Result } from '@praha/byethrow';

const double = (x: number) => x * 2;

const result = Result.pipe(
  Result.succeed(21),
  Result.map(double)
);

if (Result.isSuccess(result)) {
  console.log(result.value); // 42
}
```

## æ“ä½œã®ãƒã‚§ãƒ¼ãƒ³

æœ€ã‚‚å¼·åŠ›ãªæ©Ÿèƒ½ã®ä¸€ã¤ã¯ã€`Result.pipe` ã‚’ä½¿ã£ã¦æ“ä½œã‚’é€£é–ã•ã›ã‚‹ã“ã¨ã§ã™ã€‚

```ts
import { Result } from '@praha/byethrow';

const validateId = (id: string) => {
  if (!id.startsWith('u')) {
    return Result.fail(new Error('Invalid ID format'));
  }
  return Result.succeed(id);
};

const findUser = (id: string) => {
  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
  if (id === 'u123') {
    return Result.succeed({ id, name: 'John Doe' });
  }
  return Result.fail(new Error('User not found'));
};

const toWelcome = (user: Result.InferSuccess<typeof findUser>) => {
  return `Welcome, ${user.name}!`;
};

// è¤‡æ•°ã®æ“ä½œã‚’é€£é–
const result = Result.pipe(
  Result.succeed('u123'),
  Result.andThen(validateId),
  Result.andThen(findUser),
  Result.map(toWelcome)
);

if (Result.isSuccess(result)) {
  console.log(result.value); // "Welcome, John Doe!"
}
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

`Result.orElse` ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼ã‚’ç°¡å˜ã«å‡¦ç†ã§ãã¾ã™ã€‚

```ts
import { Result } from '@praha/byethrow';

const riskyOperation = () => Result.fail(new Error('Operation failed'));

const fallback = () => Result.succeed('Default value');

const result = Result.pipe(
  riskyOperation(),
  Result.orElse(fallback)
);

if (Result.isSuccess(result)) {
  console.log(result.value); // "Default value"
}
```

## éåŒæœŸæ“ä½œã‚’æ‰±ã†

`@praha/byethrow` ã¯éåŒæœŸæ“ä½œã¨ã‚‚ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«é€£æºã—ã¾ã™ã€‚

```ts
import { Result } from '@praha/byethrow';

const validateId = (id: string) => {
  if (!id.startsWith('u')) {
    return Result.fail(new Error('Invalid ID format'));
  }
  return Result.succeed(id);
};

const findUser = Result.fn({
  try: async (userId: string) => {
    const response = await fetch(`/api/users/${userId}`);
    return await response.json();
  },
  catch: (error) => new Error('Failed to find user', { cause: error }),
});

const result = await Result.pipe(
  Result.succeed('u123'),
  Result.andThen(validateId),
  Result.andThen(findUser),
);

if (Result.isSuccess(result)) {
  console.log('User data:', result.value);
}
```

---

`@praha/byethrow` ã§æ¥½ã—ãã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã—ã‚‡ã†ï¼ ğŸš€
